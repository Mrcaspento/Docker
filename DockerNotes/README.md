# Docker

---

## Development WorkFlow

Works around Github repo it will have two dif branches a `feature` which will be the one we add code to and make changes to
then we have a `master` branch which will be our clean and employed code

\*\* Note
I can delete the node_modules folder after I run `docker build -f Dockerfile.dev .` but when I run that code again it builds alot faster becuase the container has those files already

Any time you want expose a port from our port to our machine we need the `-p <portid>:<portid> <Image-ID>` tag

## Docker Volume

Volumes are a preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are depenedent on the directory structure and OS of the host machine, volumes are completely managed by Docker.

- Bascially we are setting up a mapping froma folder inside the container to a folder outside the container

![docker-volume](./images/Docker-Volume.png)

when You run the code below and runinto a error like "docker: Error response from daemon: driver failed programming external connectivity on endpoint sweet_bohr (0efbf995ca50c9100e3cfd9bc50d6d7887e3bb111d99b4e3e631a80eabcd3cbc): Bind for 0.0.0.0:3000 failed: port is already allocated."
make sure you dont have any of your containers running on that port you can always check with `docker ps` or `docker ps --all`

![docker-volume-command](./images/Docker-V-Command.png)

## Docker CLI Commands

- `docker ps`
- `docker ps --all`
- `docker stop <container id>`
- `docker kill`
- `docker exec -it <container id> redis-cli`
- `docker build -t <dockerUserName>/<Image_ID>:latest .`
- `docker run -p <portId>:<portId> <Image_ID>`
- `docker-compose up`
- `docker-compose up --build`
- `docker-compose ps `
- `docker build -f Dockerfile.dev .`
- `docker run -it -p 3000:3000 `
- `docker run -it -p <portId>:<portId> <Image_ID>` : allows docker to run the container in interactive mode:
- `docker run -p <portId>:<portId> <Image_ID>`
- `docker run -it -p <portId>:<portId> -v /app/node_modules -v$(pwd):/app <image_id>`

## How to Find Exit Codes

- List all containers that exited
  `docker ps --filter "status=exited"`
- Exit Code 0: Absence of an attached foreground process
- Exit Code 1: Indicates failure due to application error
- Exit Code 137: Indicates failure as container received SIGKILL (Manual intervention or ‘oom-killer’ [OUT-OF-MEMORY])
- Exit Code 139: Indicates failure as container received SIGSEGV
- Exit Code 143: Indicates failure as container received SIGTERM
- Exit Code 0
- Exit code 0 indicates that the specific container does not have a foreground process attached.
  - This exit code is the exception to all the other exit codes to follow. It does not necessarily mean something bad happened.
    Developers use this exit code if they want to automatically stop their container once it has completed its job.

---

### Exit code 0

- Exit code 0 indicates that the specific container does not have a foreground process attached.
- This exit code is the exception to all the other exit codes to follow. It does not necessarily mean something bad happened.
- Developers use this exit code if they want to automatically stop their container once it has completed its job.

---

### Exit code 1

- Indicates that the container stopped due to either an application error or an incorrect reference in Dockerfile to a file that is not present in the container.
- An application error can be as simple as “divide by 0” or as complex as “Reference to a bean name that conflicts with existing, non-compatible bean definition of same name and class.”
- An incorrect reference in Dockerfile to a file not present in the container can be as simple as a typo (the example below has sample.ja instead of sample.jar)

---

# Creating and deploying a interactive React app with Docker

## 1. Create a React app

- First start by creating a folder where you would want your root directory at
- Open up your CLI and type `npx create-react-app <appNameYouChoose> `
- Once finished run `npm run build`
- Then move on to the next step of creating a file named `Dockerfile.dev` in the root file of the React app
- use the template below as a guide

## 2. Dockerfile.dev template

```Dockerfile
FROM node:alpine

WORKDIR '/app'

COPY package.json .

RUN npm install

COPY . .

CMD ["npm", "run", "start"]

```

---
